{
  "name": "mongoose-currency",
  "version": "0.2.0",
  "description": "Adds schema type \"currency\" to mongoose. Great for converting user input.",
  "main": "index.js",
  "scripts": {
    "test": "mocha test"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/catalystmediastudios/mongoose-currency.git"
  },
  "keywords": [
    "mongoose",
    "currency",
    "money"
  ],
  "author": {
    "name": "Paul Smith",
    "email": "catalystmediastudios@gmail.com"
  },
  "license": "MIT",
  "readmeFilename": "README.md",
  "gitHead": "80f9b6fa07591917779b470a3a92c6fe3aadd9fe",
  "devDependencies": {
    "mocha": "1.9.x",
    "should": "6.0.x",
    "mongoose": "~> 4.x"
  },
  "peerDependencies": {
    "mongoose": "~> 4.x"
  },
  "readme": "## What it does\n\n* Saves a String as an integer (by stripping non digits and multiplying by 100) to prevent rounding errors when performing calculations (See gotchas for details)\n* Strips out symbols from the beginning of strings (sometimes users include the currency symbol)\n* Strips out commas (sometimes users add in commas or copy paste values into forms, e.g. \"1,000.50)\n* Only save from two digits past the decimal point (\"$500.559\" is converted to 50055 and doesn't round)\n* Strips [a-zA-Z] from strings\n* Pass in a string or a number. Numbers will be stored AS IS.\n* Assumes that if you set the value to an integer you have already done the conversion (e.g. 50000 = $500.00)\n* If a floating point number is passed in it will round it. (500.55 -> 501). Just pass in integers to be safe.\n\n## How to use\n\n```JavaScript\nvar mongoose = require('mongoose');\nvar Schema = mongoose.Schema;\n// Will add the Currency type to the Mongoose Schema types\nrequire('mongoose-currency').loadType(mongoose);\nvar Currency = mongoose.Types.Currency;\n\n// If you don't have the Currency variable declared you can use 'mongoose.Types.Currency'\nvar ProductSchema = Schema({\n  price: { type: Currency }\n});\n\nvar Product = mongoose.model('Product', ProductSchema);\n\nvar product = new Product({ price: \"$1,200.55\" });\nproduct.price; // Number: 120055\nproduct.price = 1200;\nproduct.price; // Number 1200 It will not round or multiply. Stored AS IS and should represent $12.00\n```\n### Schema options\n\nAccepts mongoose [number schema options](http://mongoosejs.com/docs/api.html#schema-number-js)\n\n```JavaScript\n// Will validate that the minimum is $200.00 and max is $500.00\nvar ProductSchema = Schema({\n  price: { type: Currency, required: true, min: -20000, max: 50000 }\n});\n\n// See Gotchas (bottom) for details\n```\n### Displaying to end users (views, reports, etc.)\n\nTo display values to end users remember to call `.toFixed(2)`\n```JavaScript\nproduct.price.toFixed(2); // Returns 1200.55\n```\n\n## Testing\n\nMake sure to have mocha installed `npm install mocha`\n\nin the root directory of the project run `mocha test`\n\n## Todo\n\n* Add currency validation?\n* Add option for what Currency strips by default (, or .) Will work better in countries where values are represented like this: 1.000.000,00\n* Add option for precision\n* Add currency validator?\n* Change min/max validators to accept currency format e.g. 200 is $200.00 not $2.00. Not sure if this is the best way or not.\n\n## Gotchas\n\nThe currency is returned as an integer. Why? Because adding two floating points together can have rounding errors.\n```\n// Not good\n1.03+1.19; // 2.2199999999999998\n```\n\n### Calculations with currency with mongoose-currency.\n\n```JavaScript\nvar product1 = Product.findById('id');\nvar product2 = Product.findById('id2');\nproduct1.price; // returns 103 which represents $1.03\nproduct2.price; // returns 119 which represents $1.19\nvar sum = product1.price+product2.price / 100;\nsum.toFixed(2); // returns a number: 2.22\n```\n\n### Displaying values for end users\n\n```JavaScript\nvar record = Product.findById('yourid');\nrecord.price; // 10050 which represents $100.50\nrecord.price.toFixed(2); // return 100.50\n```\n\nWhen you set an integer it will NOT be multiplied by 100. It will be stored AS IS!\nThis is on purpose. This library is mainly for accepting USER generated inputs from forms, etc.\n```\nproduct.price = 100;\nproduct.price; // Returns 100 Does not multiply by 100. Represents $1.00\n```\n\n### Queries and validators\n\nRemember when doing queries that to find values greater than, less than, etc. you need to multiply by 100!\n\nSo to get values greater than $100.00 you need to run your query with 100 * 100 e.g. 10000\n\n*It is considered best practice to store money values as ints.\nIt will cause far fewer problems down the road*\n\nFor further reading: http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\n\nJust remember to call toFixed(2) whenever you want to display those values to end users.\n\n\n\n[![Bitdeli Badge](https://d2weczhvl823v0.cloudfront.net/paulcsmith/mongoose-currency/trend.png)](https://bitdeli.com/free \"Bitdeli Badge\")\n\n",
  "bugs": {
    "url": "https://github.com/catalystmediastudios/mongoose-currency/issues"
  },
  "_id": "mongoose-currency@0.2.0",
  "_from": "mongoose-currency@"
}
